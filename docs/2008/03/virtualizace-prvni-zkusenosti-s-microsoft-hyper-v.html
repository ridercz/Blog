<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Virtualizace: První zkušenosti s Microsoft Hyper-V | ALTAIR.blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="cs-CZ" />
    <link rel="canonical" href="https://www.altair.blog/2008/03/virtualizace-prvni-zkusenosti-s-microsoft-hyper-v" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/6.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" href="/content/styles.min.css?sha=91D6BA748236CD1ED74480D626BE188ECC76A47B" />
    <link rel="stylesheet" type="text/css" href="/content/fa-6.5.1/css/all.min.css" />
    <link rel="alternate" type="application/rss+xml" href="https://www.altair.blog/feed.rss" title="RSS (všechny články)" />
    <link rel="alternate" type="application/rss+xml" href="https://www.altair.blog/feed-internal.rss" title="RSS (pouze místní články)" />
    <link rel="alternate" type="application/rss+xml" href="https://www.altair.blog/feed-external.rss" title="RSS (pouze odkazy)" />
    <link rel="shortcut icon" href="https://www.altair.blog/favicon.ico" />
    <link rel="icon" href="https://www.altair.blog/favicon.ico" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@ridercz" />
    <meta name="twitter:title" content="Virtualizace: První zkušenosti s Microsoft Hyper-V" />
    <meta name="twitter:description" content="Jak již stálí čtenáři vědí, virtualizační technologie patří k mým oblíbeným, ostatně i tento web běží na virtuálním serveru. Nemohl jsem tedy odolat a vyzkoušel jsem novou technologii Microsoft Hyper-V, která je součástí Windows Serveru 2008." />
    <meta name="twitter:image" content="https://www.altair.blog/content/images/preview-1200.jpg" />
    <meta property="article:published_time" content="2008-03-18T18:31:41.287+01:00" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="ALTAIR.blog" />
    <meta name="author" content="Michal Altair Valášek" />
    <meta name="title" property="og:title" content="Virtualizace: První zkušenosti s Microsoft Hyper-V" />
    <meta name="description" property="og:description" content="Jak již stálí čtenáři vědí, virtualizační technologie patří k mým oblíbeným, ostatně i tento web běží na virtuálním serveru. Nemohl jsem tedy odolat a vyzkoušel jsem novou technologii Microsoft Hyper-V, která je součástí Windows Serveru 2008." />
    <meta name="image" property="og:image" content="https://www.altair.blog/content/images/preview-1200.jpg" />
    <meta property="og:locale" content="cs_CZ" />
    <meta property="og:url" content="https://www.altair.blog/2008/03/virtualizace-prvni-zkusenosti-s-microsoft-hyper-v" />
    <script>
      (function(f, a, t, h, o, m){
        a[h]=a[h]||function(){
          (a[h].q=a[h].q||[]).push(arguments)
        };
        o=f.createElement('script'),
        m=f.getElementsByTagName('script')[0];
        o.async=1; o.src=t; o.id='fathom-script';
        m.parentNode.insertBefore(o,m)
      })(document, window, '//stats.altair.blog/tracker.js', 'fathom');
      fathom('set', 'siteId', 'OBOTR');
      fathom('trackPageview');
    </script>
    <script src="/content/scripts/autocorrect.js?sha=3D24FB150C3151FFF3B9BFCA112E1A8B2F32B377" defer="defer" onload="typo.runAutoCorrector({number: false})">//</script>
    <meta name="robots" content="index, follow" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css" integrity="sha512-hasIneQUHlh06VNBe7f6ZcHmeRTLIaQWFd43YriJ0UND19bvYRauxthDg8E4eVNPm9bRUhr5JGeqH7FRFXQu5g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body>
    <header>
      <div>
        <a href="/">
          <img src="/content/images/logo_onblack.svg" alt="altair.blog" style="max-height:100px;max-width:80%" />
        </a>
      </div>
    </header>
    <nav>
      <ul>
        <li>
          <a href="https://www.rider.cz/" title="Autor: Michal Altair Valášek">
            <i class="fal fa-fw fa-user"> </i>
          </a>
        </li>
        <li>
          <a href="/archive" title="Archiv článků">
            <i class="fal fa-fw fa-archive"> </i>
          </a>
        </li>
        <li>
          <a href="/categories" title="Rubriky">
            <i class="fal fa-fw fa-tags"> </i>
          </a>
        </li>
        <li>
          <a href="/serials" title="Seriály">
            <i class="fal fa-fw fa-list-alt"> </i>
          </a>
        </li>
        <li>
          <a href="/search" title="Vyhledávání">
            <i class="fal fa-fw fa-search"> </i>
          </a>
        </li>
        <li>
          <a href="https://www.rider.cz/#contact" title="Kontakt">
            <i class="fal fa-fw fa-envelope"> </i>
          </a>
        </li>
        <li>
          <a href="https://facebook.com/rider.cz" title="Facebook">
            <i class="fab fa-fw fa-facebook"> </i>
          </a>
        </li>
        <li>
          <a href="https://twitter.com/ridercz" title="Twitter">
            <i class="fab fa-twitter"> </i>
          </a>
        </li>
        <li>
          <a href="https://github.com/ridercz" title="Github">
            <i class="fab fa-fw fa-github"> </i>
          </a>
        </li>
        <li>
          <a href="https://ask.fm/ridercz" title="Ask.fm">
            <i class="fal fa-fw fa-question"> </i>
          </a>
        </li>
      </ul>
    </nav>
    <main>
      <h1>Virtualizace: První zkušenosti s Microsoft Hyper-V</h1>
      <aside class="article-info">
        <ul class="categories">
          <li>
            <a href="/categories/software" title="Rubrika">
              <i class="fal fa-tag"> </i>Software</a>
          </li>
        </ul>
        <ul class="serials">
          <li>
            <a href="/serials/virtualizace" title="Seriál">
              <i class="fal fa-list-alt"> </i>Virtualizace</a>
          </li>
        </ul>
        <div title="Autor">
          <a href="https://www.rider.cz/">Michal Altair Valášek </a>
          <i class="fal fa-fw fa-user">​</i>
        </div>
        <div title="Datum vydání">
          <time datetime="2008-03-18T18:31:41.287+01:00">18. března 2008 <i class="fal fa-fw fa-calendar-lines">​</i></time>
        </div>
      </aside>
      <section class="article-text">
        <p>Technologie Hyper-V je součástí Windows Serveru 2008. Svým určením je to v podstatě nástupce Virtual Serveru 2005 (o kterém jsem zde již <a href="https://www.aspnet.cz/Articles/110-virtualizace-virtual-server-2005-r2.aspx">psal</a>, stejně jako o obecných principech <a href="https://www.aspnet.cz/Articles/103-virtualizace-uvod.aspx">virtualizace</a>).</p>
<h2 id="co-co-je-microsoft-hyper-v">Co co je Microsoft Hyper-V</h2>
<p><img src="https://www.cdn.altairis.cz/Blog/2008/20080318-20080318-hyperv-manager_2.png" alt="" /></p>
<p>Hyper-V je nová generace virtualizační technologie, přímo svázaná s operačním systémem a vyždaující speciální hardware (procesor s HW podporou virtualizace). Jedná se tedy o opravdovou virtualizaci, nikoliv o emulaci.</p>
<p>Ve finální verzi Windows Serveru 2008 je pre-release verze Hyper-V, ostrá verze bude po dokončení nahrána pomocí Windows Update. Hyper-V je k dispozici pouze na 64-bitové edici Windows Server 2008 Standard a vyšší.</p>
<p>Já to testuji na Windows Server 2008 Enterprise RTM, jako hardware používám server HP ProLiant DL320 G5 s dual-core procesorem a 8 GB operační paměti.</p>
<h2 id="instalace-a-prvni-dojmy">Instalace a první dojmy</h2>
<p><img src="https://www.cdn.altairis.cz/Blog/2008/20080318-20080318-hyperv-settings_2.png" alt="" /></p>
<p>Přestože se můj server nenachází na oficiálním seznamu podporovaného hardware pro pre-release verzi, byla instalace vcelku bezproblémová. Jediný problém spočívá v tom, že pro instalaci a provoz Hyper-V musíte mít na serveru nastavené anglické prostředí.</p>
<p>Lépe řečeno: System a Default user locale musí být &quot;English (United States)&quot;. Lze doinstalovat českou klávesnici a změnit regional settings pro jiného uživatele. Pokud to neuděláte, odmítne virtualizační služba nastartovat. Tento problém by měl být vyřešen ve finální verzi.</p>
<p>Správa virtuálních serverů se provádí z Microsoft Management Console, nikoliv přes web, jako v případě Virtual Serveru 2005. Obecně mi přijde rozhraní pro správu velmi dobře navržené, například všechny parametry virtuálnícho stroje lze nastavit z jednoho přehledného dialogu, který je vyřešen ještě lépe, než obdobný dialog u Virtual PC (a o řád lépe, než webové rozhraní Virtual Serveru). To je ale průvodní znak téměř všech nástrojů pro správu, které jsou součástí Windows Serveru 2008. Zdá se mi, že při jejich navrhování skutečně někdo myslel hlavou.</p>
<p>Bohužel není (a obávám se, že z technologických důvodů ani nikdy nebude) oficiálně podporován scénář, kdy na fyzický server přistupujete přes remote desktop (terminál) a z něj spravujete konzoli virtuálního stroje (VMRC). Praktické zkušenosti jsou takové, že pokud máte nainstalované Integration services (dříve Virtual Machine Additions), funguje to celkem dobře, včetně myší atd. Nechodí akorát systémové klávesové zkratky, protože kolidují s terminálovými službami. Pokud nemáte nainstalované Integration Services, myš nefunguje vůbec, narozdíl od Virtual Serveru, kde fungovala sice chaoticky, ale přece jenom. Při instalaci a úvodní konfiguraci OS si tedy musíte vystačit jenom s klávesnicí.</p>
<p>Instalace integration services je také vyřešena podstatně lépe, není tam klasický setup, stačí vrazit virtuální CD do mechaniky a pokud je spuštěn autorun, nainstaluje se to samo, stačí akorát mačkat Enter, což ze shora uvedených důvodů potěší.</p>
<p>Byla kompletně překopána logika podpory sítí. Hyper-V vytvoří nad fyzickou kartou virtuální síťvku, přes kterou pak vede veškerou komunikaci fyzického i virtuálního stroje. Microsoft doporučuje u serveru vyhradit jednu fyzickou kartu pro management a přijde mi to jako velmi dobrá rada, protože pokud budete mít jenom jednu síťovku a Hyper-V vám nějak vyhnije, na server se po síti nedostanete.</p>
<p>Neprováděl jsem žádné formální testování, ale subjektivně mi přijde Hyper-V svižnější, než Virtual Server 2005 R2 SP1 na podobním hardware</p>
<h2 id="prevod-serveru-z-virtual-serveru-2005">Převod serverů z Virtual Serveru 2005</h2>
<p>Vyzkoušel jsem i převod virtuálního serveru z Virtual Server 2005 do Hyper-V. Formát virtuálních disků (VHD) zůstává stejný jako u VS nebo VPC. Soubory s nastaveními (VMC) jsou různé, lépe řečeno, Hyper-V používá nějaký zcela odlišný formát. Virtuální stroj a jeho nastavení tedy budete muset vytvořit znovu a jenom k němu připojit existující disky.</p>
<p>Hardware virtuálního stroje je v Hyper-V odlišný, než ve Virtual PC nebo Virtual Serveru, nejsou kompatibilní ani Virtual Machine Additions. Musíte je tedy odinstalovat a nainstalovat Integration Services. Kromě odpovídajících ovladačů také změni HAL ve Windows 2003.</p>
<p>Shora uvedené se týká i síťových karet. Před migrací byste tedy měli ještě na starém železe vymazat IP konfiguraci síťových karet, jiank bude Windows při nastavení stejné IP protestovat. Pokud jste na to zapomněli, postup pro odstranění starých síťových karet najdete v <a href="http://support.microsoft.com/default.aspx/kb/241257">Q241257</a>.</p>
<p>Po několika restartech (odinstalace VM Additions, instalace nového HAL, instalace Integration Services) a nastavení IP na nových síťových kartách systém normálně funguje.</p>

      </section>
      <section class="issues">
        <header>
          <i class="fab fa-github">​</i> Je v článku něco špatně? Chcete něco doplnit?</header>
        <p>Komentáře zde nenajdete, ale pokud je v článku chyba nebo k němu chcete něco věcného doplnit, můžete na GitHubu <a href="https://github.com/ridercz/Blog/issues/new?title=Virtualizace%3a+Prvn%c3%ad+zku%c5%a1enosti+s+Microsoft+Hyper-V&amp;body=https://www.altair.blog/2008/03/virtualizace-prvni-zkusenosti-s-microsoft-hyper-v">otevřít nový issue</a> nebo <a href="https://github.com/ridercz/Blog/edit/master/source/2008/03/virtualizace-prvni-zkusenosti-s-microsoft-hyper-v.md">navrhnout změnu v textu</a> a poslat mi pull request.</p>
        <p>Tamtéž také najdete <a href="https://github.com/ridercz/Blog/commits/master/source/2008/03/virtualizace-prvni-zkusenosti-s-microsoft-hyper-v.md">historii všech verzí článku</a>, pokud v něm byly provedeny nějaké změny či úpravy.</p>
      </section>
      <section class="sharing">
        <span>Pošli to dál:</span>
        <ul>
          <li>
            <a href="https://twitter.com/intent/tweet?text=https://www.altair.blog/2008/03/virtualizace-prvni-zkusenosti-s-microsoft-hyper-v">
              <i class="fab fa-x-twitter">​</i>
            </a>
          </li>
          <li>
            <a href="https://www.facebook.com/sharer.php?u=https://www.altair.blog/2008/03/virtualizace-prvni-zkusenosti-s-microsoft-hyper-v">
              <i class="fab fa-facebook-f">​</i>
            </a>
          </li>
        </ul>
      </section>
    </main>
    <footer>
      <ul class="logos">
        <li>
          <img src="/content/images/logo_onwhite.svg" alt="altair.blog" style="height:38px;" />
        </li>
      </ul>
      <ul class="text">
        <li>
          Copyright © <a href="https://www.rider.cz/">Michal Altair Valášek</a>, 2003-2024</li>
        <li>
          Powered by <a href="https://www.xml4web.com/">XML4web</a> on <a href="https://www.github.com/">GitHub Pages</a></li>
        <li>
          <i class="fal fa-rss">​</i> RSS: <a href="/feed.rss">všechno</a> | <a href="/feed-internal.rss">místní</a> | <a href="/feed-external.rss">odkazy</a></li>
      </ul>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js" integrity="sha512-IaaKO80nPNs5j+VLxd42eK/7sYuXQmr+fyywCNA0e+C6gtQnuCXNtORe9xR4LqGPz5U9VpH+ff41wKs/ZmC3iA==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/arduino.min.js" integrity="sha512-bOF+tbLNVPwsmPKbwZAJT2KD7J2soKGicZMV+iFZVyqD7qgZtpWOiY9+EmB+HyPgTP3Kah7K0aQVtX6mVK3sBg==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/bash.min.js" integrity="sha512-yyMT1pQvQ9ZFAB8j/dUWeEjWTEQZBmV9pitXN7fmJYbqsoizQ0kVw8wONhrwBHE0Z/S8tKQyRcvbW4pG4m5cIw==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/c.min.js" integrity="sha512-lzcjwENIEpri/9RQiWGJLxGxZ21Pr1qWvzEIpEa4yxPTSEderzTew+5Ff5XBbTC3OuLrb4P0qSwISoq1E/ddLg==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/csharp.min.js" integrity="sha512-2S5x4UDJdymqDOBGIz88WSMwb/HC27t9gZyAus7RyUA2n3YXVJlYUrX606FkkU5+XrE+i12FNOhczUpPEh2XiQ==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/css.min.js" integrity="sha512-2EZCMzH/v5Q+9kXnio4UlG/iGM7Iy16NPjb4fFmtu501/gdvebqlP3sa2VvJsxnTJVWlFX8EN+BHxG4efqELWw==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script>¨
              <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/dos.min.js" integrity="sha512-4QYHD9PAHudNw8hYXd79O8t7BrFe2kl19eYIPAwdCxiJ7bYxERRpvS2VbFixd+kfLqVzUH9m1LBnmZlUf3VuAA==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/gcode.min.js" integrity="sha512-BIiAVlWdHwCcZSixwJwhoUJSVGaNtPXCDzcyR5AVlyzXS9FDies/go5012bSdZr15eCTZG4G42GqMSkIhKpSoQ==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/javascript.min.js" integrity="sha512-Z5vOg00atIeZ04QhYxz3iRlFnU5qnrB0eYbBDmXMhHqJYx4dc6n1KY5qzh3fEfrFzaR05D34mOin6ObjPjuWdA==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/json.min.js" integrity="sha512-WRejcYn/ITFLjqnYYgF3Es2b2dc3GnVc70wF3nO/G6uQtsN/LhxSlZp5y7E9JP3gqQ5gY/TPg9QdOlB3SY+ucQ==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/markdown.min.js" integrity="sha512-8YFObAd0dPoua15RGQBCDtnXMA4zJnAxaL4QSjgLLEKmJ1A2Aar7M1gamz2512/mKzx1ut96KNV7ggEV8WvRxg==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/openscad.min.js" integrity="sha512-r7SipMjtLS3BxLiHtjRORcw8/sJDk6Ums0BwzuEMQoWe4hSKYQs3Zk2qClX3AwVw9lrTFIu3rTVcGgODqwBMww==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/scss.min.js" integrity="sha512-0U8Ud0Dh6EsQR0cokSx1hPYzG3i8AnfYEaDXNGi5rSsVJMdAaas/gif/b/8JrGsuuC7xl7dfBGHFgZrhWb39Bg==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/sql.min.js" integrity="sha512-LxrbI3MKe/9KnjAs8zlLrZFRpp2J+jp0pML7zd6OAo/LHH8CEKM2Ef/jTfSX1gm8Auex3J5Jdj0rMkYejmMVMQ==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/xml.min.js" integrity="sha512-2EQPABfCqv0Tr9AxzXh2U9DrbRre5g5H/BL7j/hGbES3mRjQ44bBks0I+2EoPbA4YzWHQ8BsVHNTaHr7t5RHKw==" crossorigin="anonymous" referrerpolicy="no-referrer">//</script><script>
                  hljs.initHighlightingOnLoad();
              </script></body>
</html>