<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Jak na Raspberry Pi zapnout grafické rozhraní a vzdálený přístup? | ALTAIR.blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="cs-CZ" />
    <link rel="canonical" href="https://www.altair.blog/2015/07/jak-na-raspberry-pi-zapnout-graficke-rozhrani-a-vzdaleny-pristup" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/6.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" href="/content/styles.min.css?sha=86D6BE2BECADA8998ACB7999F797DEF1103C76B2" />
    <link rel="stylesheet" type="text/css" href="/content/fa-6.5.1/css/all.min.css" />
    <link rel="alternate" type="application/rss+xml" href="https://www.altair.blog/feed.rss" title="RSS (všechny články)" />
    <link rel="alternate" type="application/rss+xml" href="https://www.altair.blog/feed-internal.rss" title="RSS (pouze místní články)" />
    <link rel="alternate" type="application/rss+xml" href="https://www.altair.blog/feed-external.rss" title="RSS (pouze odkazy)" />
    <link rel="shortcut icon" href="https://www.altair.blog/favicon.ico" />
    <link rel="icon" href="https://www.altair.blog/favicon.ico" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@ridercz" />
    <meta name="twitter:title" content="Jak na Raspberry Pi zapnout grafické rozhraní a vzdálený přístup?" />
    <meta name="twitter:description" content="Chcete si s Raspberry Pi pohrát víc, než jak vám nabízím v seriálu o projektu Atropa? Můžete povolit grafické rozhraní a zapnout vzdálený přístup přes RDP." />
    <meta name="twitter:image" content="https://www.altair.blog/content/images/preview-1200.jpg" />
    <meta property="article:published_time" content="2015-07-23T19:53:00+02:00" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="ALTAIR.blog" />
    <meta name="author" content="Michal Altair Valášek" />
    <meta name="title" property="og:title" content="Jak na Raspberry Pi zapnout grafické rozhraní a vzdálený přístup?" />
    <meta name="description" property="og:description" content="Chcete si s Raspberry Pi pohrát víc, než jak vám nabízím v seriálu o projektu Atropa? Můžete povolit grafické rozhraní a zapnout vzdálený přístup přes RDP." />
    <meta name="image" property="og:image" content="https://www.altair.blog/content/images/preview-1200.jpg" />
    <meta property="og:locale" content="cs_CZ" />
    <meta property="og:url" content="https://www.altair.blog/2015/07/jak-na-raspberry-pi-zapnout-graficke-rozhrani-a-vzdaleny-pristup" />
    <script>
      (function(f, a, t, h, o, m){
        a[h]=a[h]||function(){
          (a[h].q=a[h].q||[]).push(arguments)
        };
        o=f.createElement('script'),
        m=f.getElementsByTagName('script')[0];
        o.async=1; o.src=t; o.id='fathom-script';
        m.parentNode.insertBefore(o,m)
      })(document, window, '//stats.altair.blog/tracker.js', 'fathom');
      fathom('set', 'siteId', 'OBOTR');
      fathom('trackPageview');
    </script>
    <script src="/content/scripts/autocorrect.js?sha=3D24FB150C3151FFF3B9BFCA112E1A8B2F32B377" defer="defer" onload="typo.runAutoCorrector({number: false})">//</script>
    <meta name="robots" content="index, follow" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css" integrity="sha512-hasIneQUHlh06VNBe7f6ZcHmeRTLIaQWFd43YriJ0UND19bvYRauxthDg8E4eVNPm9bRUhr5JGeqH7FRFXQu5g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body>
    <header>
      <div>
        <a href="/">
          <img src="/content/images/logo_onblack.svg" alt="altair.blog" style="max-height:100px;max-width:80%" />
        </a>
      </div>
    </header>
    <nav>
      <ul>
        <li>
          <a href="https://www.rider.cz/" title="Autor: Michal Altair Valášek">
            <i class="fal fa-fw fa-user"> </i>
          </a>
        </li>
        <li>
          <a href="/archive" title="Archiv článků">
            <i class="fal fa-fw fa-archive"> </i>
          </a>
        </li>
        <li>
          <a href="/categories" title="Rubriky">
            <i class="fal fa-fw fa-tags"> </i>
          </a>
        </li>
        <li>
          <a href="/serials" title="Seriály">
            <i class="fal fa-fw fa-list-alt"> </i>
          </a>
        </li>
        <li>
          <a href="/search" title="Vyhledávání">
            <i class="fal fa-fw fa-search"> </i>
          </a>
        </li>
        <li>
          <a href="https://www.rider.cz/#contact" title="Kontakt">
            <i class="fal fa-fw fa-envelope"> </i>
          </a>
        </li>
        <li>
          <a href="https://facebook.com/rider.cz" title="Facebook">
            <i class="fab fa-fw fa-facebook"> </i>
          </a>
        </li>
        <li>
          <a href="https://twitter.com/ridercz" title="Twitter">
            <i class="fab fa-twitter"> </i>
          </a>
        </li>
        <li>
          <a href="https://github.com/ridercz" title="Github">
            <i class="fab fa-fw fa-github"> </i>
          </a>
        </li>
        <li>
          <a href="https://ask.fm/ridercz" title="Ask.fm">
            <i class="fal fa-fw fa-question"> </i>
          </a>
        </li>
      </ul>
    </nav>
    <main>
      <h1>Jak na Raspberry Pi zapnout grafické rozhraní a vzdálený přístup?</h1>
      <aside class="article-info">
        <ul class="categories">
          <li>
            <a href="/categories/it" title="Rubrika">
              <i class="fal fa-tag"> </i>IT</a>
          </li>
        </ul>
        <div title="Autor">
          <a href="https://www.rider.cz/">Michal Altair Valášek </a>
          <i class="fal fa-fw fa-user">​</i>
        </div>
        <div title="Datum vydání">
          <time datetime="2015-07-23T19:53:00+02:00">23. července 2015 <i class="fal fa-fw fa-calendar-lines">​</i></time>
        </div>
      </aside>
      <section class="article-text">
        <p>Chcete si s Raspberry Pi pohrát víc, než jak vám nabízím v seriálu o projektu Atropa? Můžete povolit grafické rozhraní a zapnout vzdálený přístup přes RDP.</p>
<h2 id="jak-zapnout-graficke-prostredi">Jak zapnout grafické prostředí?</h2>
<p>Z konzole můžete nastartovat grafické rozhraní příkazem <code>startx</code>. Ale co když chcete, aby vám Raspberry do grafického prostředí rovnou bootovalo?</p>
<p>V takovém případě zadejte příkaz <code>sudo raspi-config</code>. Spustí se vám textové rozhraní, pomocí kterého můžete nastavit řadu paramerů. Mimo jiné tam najdete i volbu <em>Enable boot to Desktop/Scratch</em>:</p>
<p><a href="https://www.cdn.altairis.cz/Blog/2015/20150713-raspi_config_1_2.png"><img src="https://www.cdn.altairis.cz/Blog/2015/20150713-raspi_config_1_thumb.png" alt="Utilita raspi-config: hlavní menu" title="Utilita raspi-config: hlavní menu" /></a></p>
<p>Po klepnutí na něj si můžete vybrat, zda se má bootovat do textové konzole, grafického prostředí nebo do programovacího jazyka Scratch (což je takový trochu lepší Karel nebo Logo, programovací jazyk pro děti):</p>
<p><a href="https://www.cdn.altairis.cz/Blog/2015/20150713-raspi_config_2_2.png"><img src="https://www.cdn.altairis.cz/Blog/2015/20150713-raspi_config_2_thumb.png" alt="Utilita raspi-config: nastavení režimu bootu" title="Utilita raspi-config: nastavení režimu bootu" /></a></p>
<p>Po výběru požadovaného typu bootu zvolte <em><Ok></em> a <em><Select></em> a restartuje Rapberry.</p>
<h2 id="jak-zapnout-vzdaleny-pristup">Jak zapnout vzdálený přístup?</h2>
<p>Pokud nechcete na Raspberry pracovat lokálně, ale vzdáleně, hodí se na něm zapnout RDP, na které se pak budete moci připojit z Windows.</p>
<p>Za tímto účelem musíte nainstalovat balíček <em>xrdp</em>, což učiníte z terminálu následujícím příkazem: <code>sudo apt-get install xrdp</code>.</p>
<p>Při snaze rozchodit správně xrdp jsem měl problém s českou klávesnicí. Ačkoliv mi správně fungovala na lokále v textovém i grafickém režimu, přes RDP jsem měl pořád anglické rozložení a nedokázal jsem psát háčky a čárky. Po jistých problémech jsem přišel na řešení.</p>
<p>Připojte se lokálně na konzoli do grafického rozhraní a spusťte terminál (ve kterém vám funguje klávesnice, jakou chcete). Poté spusťte následující příkazy:</p>
<pre><code>sudo xrdp-genkeymap /etc/xrdp/km-0405.ini
sudo cp /etc/xrdp/km-0409.ini /etc/xrdp/km-0409.ini.bak
sudo xrdp-genkeymap /etc/xrdp/km-0409.ini
</code></pre>
<p>První příkaz vezme stávající mapování klávesnice a uloží ho do souboru <code>km-0405.ini</code>. Číslo 0405 je kód pro češtinu (seznam kódů najdete <a href="http://xrdp.sourceforge.net/documents/keymap/rfc1766.html">na webu xrdp</a>). To by samo o sobě mělo stačit, nicméně mně to nepomohlo. Možná proto, že mám anglická Windows a RDP klient reportuje jako jazyk angličtinu. Proto jsem se rozhodl, že českým přepíšu anglické mapování klávesnice, které je v souboru <code>km-0409.ini</code>. Původní nastavení jsem si pro jistotu uložil do <code>km-0409.ini.bak</code> (to dělá druhý příkaz) a pak přegeneroval původní soubor (třetí příkaz). Poté mi xrdp začalo fungovat česky.</p>
<h2 id="jak-se-pripojit-z-windows">Jak se připojit z Windows?</h2>
<p>Pokud se pokusíte připojit s výchozími nastaveními, nebude vám to fungovat, protože xrdp podporuje pouze osmi nebo šestnáctibitovou barevnou hloubku, zatímco výchozí nastavení terminálového klienta je 32 bitů.</p>
<p>Příkazem <code>mstsc</code> spusťte na Windows terminálového klienta a klepněte ve spodní části okna na šipku vedle <em>Show Options</em>. Přepněte se na záložku <em>Display</em> a nastavte jako barevnou hloubku <em>High Color (16 bit)</em>. Můžete také nastavit rozlišení, jaké chcete používat, pokud chcete, aby spojení běželo v okně a ne na plné obrazovce:</p>
<p><a href="https://www.cdn.altairis.cz/Blog/2015/20150713-mstsc_2.png"><img src="https://www.cdn.altairis.cz/Blog/2015/20150713-mstsc_thumb.png" alt="Nastavení vlastností terminálového klienta" title="Nastavení vlastností terminálového klienta" /></a></p>
<p>Na záložce <em>General</em> zadejte název nebo IP adresu vašeho RPi za a klepněte na <em>Connect</em>. Budete vyzvání k potvrzení, že se chcete připojit pomocí nešifrovaného spojení  a poté se vám zobrazí přihlašovací dialog, kde zadejte své uživatelské jméno a heslo (výchozí je <code>pi</code> a <code>raspberry</code>):</p>
<p><a href="https://www.cdn.altairis.cz/Blog/2015/20150713-xrdp_dialog_2.png"><img src="https://www.cdn.altairis.cz/Blog/2015/20150713-xrdp_dialog_thumb.png" alt="Přihlašovací dialog xrdp" title="Přihlašovací dialog xrdp" /></a></p>
<p>Poté budete úspěšně připojeni. Na posledním screenshotu vidíte, jak jsem přes terminál připojen na Raspberry, kde běží Midnight Commander, webový prohlížeč a LibreOffice Writer, který jsem nainstaloval z grafického prostředí pomocí Pi Store:</p>
<p><a href="https://www.cdn.altairis.cz/Blog/2015/20150713-xrdp_desktop_2.png"><img src="https://www.cdn.altairis.cz/Blog/2015/20150713-xrdp_desktop_thumb.png" alt="RPi přes RDP" title="RPi přes RDP" /></a></p>

      </section>
      <section class="issues">
        <header>
          <i class="fab fa-github">​</i> Je v článku něco špatně? Chcete něco doplnit?</header>
        <p>Komentáře zde nenajdete, ale pokud je v článku chyba nebo k němu chcete něco věcného doplnit, můžete na GitHubu <a href="https://github.com/ridercz/Blog/issues/new?title=Jak+na+Raspberry+Pi+zapnout+grafick%c3%a9+rozhran%c3%ad+a+vzd%c3%a1len%c3%bd+p%c5%99%c3%adstup%3f&amp;body=https://www.altair.blog/2015/07/jak-na-raspberry-pi-zapnout-graficke-rozhrani-a-vzdaleny-pristup">otevřít nový issue</a> nebo <a href="https://github.com/ridercz/Blog/edit/master/source/2015/07/jak-na-raspberry-pi-zapnout-graficke-rozhrani-a-vzdaleny-pristup.md">navrhnout změnu v textu</a> a poslat mi pull request.</p>
        <p>Tamtéž také najdete <a href="https://github.com/ridercz/Blog/commits/master/source/2015/07/jak-na-raspberry-pi-zapnout-graficke-rozhrani-a-vzdaleny-pristup.md">historii všech verzí článku</a>, pokud v něm byly provedeny nějaké změny či úpravy.</p>
      </section>
      <section class="sharing">
        <span>Pošli to dál:</span>
        <ul>
          <li>
            <a href="https://twitter.com/intent/tweet?text=https://www.altair.blog/2015/07/jak-na-raspberry-pi-zapnout-graficke-rozhrani-a-vzdaleny-pristup">
              <i class="fab fa-x-twitter">​</i>
            </a>
          </li>
          <li>
            <a href="https://www.facebook.com/sharer.php?u=https://www.altair.blog/2015/07/jak-na-raspberry-pi-zapnout-graficke-rozhrani-a-vzdaleny-pristup">
              <i class="fab fa-facebook-f">​</i>
            </a>
          </li>
        </ul>
      </section>
    </main>
    <footer>
      <ul class="logos">
        <li>
          <img src="/content/images/logo_onwhite.svg" alt="altair.blog" style="height:38px;" />
        </li>
      </ul>
      <ul class="text">
        <li>
          Copyright © <a href="https://www.rider.cz/">Michal Altair Valášek</a>, 2003-2024</li>
        <li>
          Powered by <a href="https://www.xml4web.com/">XML4web</a> on <a href="https://www.github.com/">GitHub Pages</a></li>
        <li>
          <i class="fal fa-rss">​</i> RSS: <a href="/feed.rss">všechno</a> | <a href="/feed-internal.rss">místní</a> | <a href="/feed-external.rss">odkazy</a></li>
      </ul>
    </footer>
  </body>
</html>